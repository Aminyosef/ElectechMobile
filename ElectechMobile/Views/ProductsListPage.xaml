<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:syncfusion="clr-namespace:Syncfusion.Maui.ListView;assembly=Syncfusion.Maui.ListView"
             xmlns:core="clr-namespace:Syncfusion.Maui.Core;assembly=Syncfusion.Maui.Core"
             x:Class="ElectechMobile.Views.ProductsListPage"
             Title="Products List"
             BackgroundColor="#F8F9FA">

    <ContentPage.Resources>
        <ResourceDictionary>
            <!-- ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø£Ù„ÙˆØ§Ù† -->
            <Color x:Key="PrimaryColor">#2E86C1</Color>
            <Color x:Key="SecondaryColor">#F8F9FA</Color>
            <Color x:Key="AccentColor">#E74C3C</Color>
            <Color x:Key="TextPrimaryColor">#2C3E50</Color>
            <Color x:Key="TextSecondaryColor">#7F8C8D</Color>
            <Color x:Key="CardBackgroundColor">White</Color>
            <Color x:Key="ShadowColor">#E0E0E0</Color>

            <!-- ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø£Ù†Ù…Ø§Ø· -->
            <Style x:Key="CardFrameStyle" TargetType="Frame">
                <Setter Property="BackgroundColor" Value="{StaticResource CardBackgroundColor}" />
                <Setter Property="BorderColor" Value="{StaticResource ShadowColor}" />
                <Setter Property="CornerRadius" Value="12" />
                <Setter Property="HasShadow" Value="True" />
                <Setter Property="Padding" Value="15" />
                <Setter Property="Margin" Value="5,8" />
            </Style>

            <Style x:Key="ProductNameStyle" TargetType="Label">
                <Setter Property="FontSize" Value="16" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="TextColor" Value="{StaticResource PrimaryColor}" />
                <Setter Property="LineBreakMode" Value="WordWrap" />
                <Setter Property="MaxLines" Value="2" />
            </Style>

            <Style x:Key="ProductCodeStyle" TargetType="Label">
                <Setter Property="FontSize" Value="12" />
                <Setter Property="TextColor" Value="{StaticResource TextSecondaryColor}" />
                <Setter Property="FontAttributes" Value="Italic" />
            </Style>

            <Style x:Key="LabelHeaderStyle" TargetType="Label">
                <Setter Property="FontSize" Value="13" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="TextColor" Value="{StaticResource TextPrimaryColor}" />
            </Style>

            <Style x:Key="LabelValueStyle" TargetType="Label">
                <Setter Property="FontSize" Value="14" />
                <Setter Property="FontAttributes" Value="Bold" />
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>

    <ContentPage.Content>
        <Grid RowDefinitions="Auto,*">

            <!-- Header Section -->
            <Border Grid.Row="0" 
                    BackgroundColor="{StaticResource PrimaryColor}"
                    StrokeThickness="0"
                    Padding="20,15,20,20"
                    Margin="0">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="0,0,20,20"/>
                </Border.StrokeShape>
                <Label x:Name="CatName" 
                       FontSize="18"
                       FontAttributes="Bold"
                       TextColor="White"
                       HorizontalOptions="Center" 
                       Text="Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"/>
            </Border>

            <!-- Products List Section -->
            <RefreshView Grid.Row="1" 
                        Margin="10,5">
                <syncfusion:SfListView x:Name="listView" 
                                      FlowDirection="RightToLeft"
                                      ItemSize="160" 
                                      ItemSpacing="0"
                                      SelectionMode="Single"
                                      ItemsSource="{Binding Products}"
                                      AutoFitMode="Height"
                                      ScrollBarVisibility="Never">

                    <syncfusion:SfListView.ItemTemplate>
                        <DataTemplate>
                            <Frame Style="{StaticResource CardFrameStyle}">
                                <Grid RowSpacing="8" ColumnSpacing="10">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>

                                    <!-- Product Header -->
                                    <StackLayout Grid.Row="0" 
                                               Grid.ColumnSpan="2" 
                                               Spacing="4">
                                        <Label Text="{Binding name}" 
                                               Style="{StaticResource ProductNameStyle}"/>
                                        <Label Text="{Binding cod}" 
                                               Style="{StaticResource ProductCodeStyle}"/>
                                    </StackLayout>

                                    <!-- Price and Stock Section -->
                                    <Grid Grid.Row="1" 
                                          Grid.ColumnSpan="2"
                                          ColumnDefinitions="*,*"
                                          RowDefinitions="Auto,Auto"
                                          ColumnSpacing="15"
                                          RowSpacing="5">

                                        <!-- Price Section -->
                                        <Frame Grid.Column="0" 
                                               BackgroundColor="#FFF5F5"
                                               BorderColor="{StaticResource AccentColor}"
                                               CornerRadius="8"
                                               Padding="10,8"
                                               HasShadow="False">
                                            <StackLayout Orientation="Horizontal" Spacing="5">
                                                <Label Text="ðŸ’°" FontSize="14"/>
                                                <Label Text="Ø§Ù„Ø³Ø¹Ø±:" 
                                                       Style="{StaticResource LabelHeaderStyle}"/>
                                                <Label Text="{Binding price}" 
                                                       Style="{StaticResource LabelValueStyle}"
                                                       TextColor="{StaticResource AccentColor}"/>
                                            </StackLayout>
                                        </Frame>

                                        <!-- Stock Section -->
                                        <Frame Grid.Column="1" 
                                               BackgroundColor="#F0F8FF"
                                               BorderColor="{StaticResource PrimaryColor}"
                                               CornerRadius="8"
                                               Padding="10,8"
                                               HasShadow="False">
                                            <StackLayout Orientation="Horizontal" Spacing="5">
                                                <Label Text="ðŸ“¦" FontSize="14"/>
                                                <Label Text="Ø§Ù„Ù…Ø®Ø²ÙˆÙ†:" 
                                                       Style="{StaticResource LabelHeaderStyle}"/>
                                                <Label Text="{Binding qty2023}" 
                                                       Style="{StaticResource LabelValueStyle}"
                                                       TextColor="{StaticResource PrimaryColor}"/>
                                            </StackLayout>
                                        </Frame>
                                    </Grid>


                                </Grid>
                            </Frame>
                        </DataTemplate>
                    </syncfusion:SfListView.ItemTemplate>
                </syncfusion:SfListView>
            </RefreshView>

            <!-- Loading Indicator -->
            <core:SfBusyIndicator x:Name="busyIndicator"
                                 Grid.RowSpan="2"
                                 Title="Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ...."
                                 TitleSpacing="20"
                                 TitlePlacement="Bottom"
                                 IndicatorColor="{StaticResource PrimaryColor}"
                                 AnimationType="Cupertino"
                                 BackgroundColor="#80000000"/>
        </Grid>
    </ContentPage.Content>
</ContentPage>